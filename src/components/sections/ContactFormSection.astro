<div id="kontakt" aria-hidden="true"></div>
<section id="contact" class="section fade-in">
  <div class="max-w-2xl mx-auto">
    <h2 class="text-4xl md:text-5xl font-black text-outline uppercase mb-8 text-center">
      Kontakt
    </h2>
    <div class="text-center mb-6">
      <p class="text-lg opacity-90 mb-2">Oder schreibe uns direkt eine E-Mail:</p>
      <a
        href="mailto:info@baseballcamp-magdeburg.de"
        class="text-xl font-bold underline hover:opacity-80"
      >
        info@baseballcamp-magdeburg.de
      </a>
    </div>
    <div class="card">
      <form
        action="https://api.web3forms.com/submit"
        method="POST"
        class="space-y-6"
        id="contact-form"
      >
        <input type="hidden" name="access_key" value="c92756a2-b5fb-454c-9ce1-cca16f6f0397" />
        <input type="hidden" name="from_name" value="Baseball Camp Kontaktformular" />
        
        <div id="contact-form-status" role="alert" aria-live="polite" tabindex="-1" class="hidden p-4 rounded border-2 border-white font-bold text-center"></div>

        <div>
          <label for="contact-name" class="block text-lg font-bold mb-2 uppercase">Vor- und Nachname</label>
          <input
            id="contact-name"
            type="text"
            name="name"
            class="input-field"
            placeholder="Maxine Muster"
            autocomplete="name"
            required
          />
        </div>
        <div>
          <label for="contact-email" class="block text-lg font-bold mb-2 uppercase">E-Mail</label>
          <input
            id="contact-email"
            type="email"
            name="email"
            class="input-field"
            placeholder="maxine@example.com"
            autocomplete="email"
            required
          />
        </div>
        <div>
          <label for="contact-phone" class="block text-lg font-bold mb-2 uppercase">Telefon (optional)</label>
          <input
            id="contact-phone"
            type="tel"
            name="phone"
            class="input-field"
            placeholder="+49 391 0000000"
            autocomplete="tel"
          />
        </div>
        <div>
          <label for="contact-subject" class="block text-lg font-bold mb-2 uppercase">Betreff</label>
          <input
            id="contact-subject"
            type="text"
            name="subject"
            class="input-field"
            placeholder="Frage zum Camp"
            required
          />
        </div>
        <div>
          <label for="contact-message" class="block text-lg font-bold mb-2 uppercase">Nachricht</label>
          <textarea
            id="contact-message"
            name="message"
            class="input-field"
            rows="4"
            placeholder="Schreibe uns deine Frage"
            required
          ></textarea>
        </div>
        <div>
          <label class="flex items-center gap-2 text-lg">
            <input id="contact-consent" type="checkbox" name="email_consent" class="w-5 h-5" required />
            <span>Ich stimme der Kontaktaufnahme per E-Mail zu.</span>
          </label>
        </div>
        <button type="submit" class="btn-primary w-full">Nachricht senden</button>
      </form>
    </div>
  </div>
</section>

<script is:inline>
  const form = document.getElementById("contact-form");
  const statusDiv = document.getElementById("contact-form-status");

  if (form && statusDiv) {
    form.addEventListener("submit", async (e) => {
      e.preventDefault();

      const submitButton = form.querySelector('button[type="submit"]');
      if (!submitButton) return;

      const originalText = submitButton.textContent || "";
      submitButton.disabled = true;
      submitButton.textContent = "Wird gesendet...";

      try {
        const formData = new FormData(form);
        const response = await fetch("https://api.web3forms.com/submit", {
          method: "POST",
          body: formData,
        });

        const data = await response.json();

        if (data.success) {
          statusDiv.className = "p-4 rounded border-2 border-white font-bold text-center bg-green-500/20 text-green-200";
          statusDiv.textContent = "✓ Nachricht erfolgreich gesendet! Wir melden uns bald bei dir.";
          statusDiv.classList.remove("hidden");
          form.reset();
          statusDiv.focus();
          window.scrollTo({ top: form.offsetTop - 100, behavior: "smooth" });
        } else {
          throw new Error(data.message || "Ein Fehler ist aufgetreten");
        }
      } catch (error) {
        statusDiv.className = "p-4 rounded border-2 border-white font-bold text-center bg-red-500/20 text-red-200";
        statusDiv.textContent = "✗ Fehler beim Senden. Bitte versuche es erneut oder kontaktiere uns direkt per E-Mail.";
        statusDiv.classList.remove("hidden");
        statusDiv.focus();
      } finally {
        submitButton.disabled = false;
        submitButton.textContent = originalText;
      }
    });
  }
</script>
