---
const faqs = [
  {
    question: "Für wen ist das Camp geeignet?",
    answer:
      "Das Camp richtet sich an Jugendliche der Jahrgänge 2009 bis 2014. " +
      "Du brauchst absolut keine Vorkenntnisse im Baseball – " +
      "wir bringen dir alles von Grund auf bei!",
  },
  {
    question: "Was muss ich mitbringen?",
    answer:
      "Eigentlich nur Sportkleidung und gute Laune! " +
      "Die Baseball-Ausrüstung (Handschuhe, Schläger etc.) stellen wir dir komplett zur Verfügung. " +
      "Du bekommst außerdem eine eigene Cap und ein T-Shirt deines Teams, " +
      "das jeden Tag gewaschen wird und das du am Ende mit nach Hause nehmen darfst!",
  },
  {
    question: "Wie lange dauert das Camp täglich?",
    answer:
      "Wir trainieren und spielen täglich von 9:00 Uhr bis 17:00 Uhr. " +
      "Dazwischen gibt es gemeinsames Mittagessen, Teamzeiten und ein spannendes Rahmenprogramm.",
  },
  {
    question: "Wie viel kostet das Camp?",
    answer:
      `Das Camp kostet im Frühbucher-Preis von 60€. ` +
      `Zusätzlich zu 4 1/2 Tagen vollem Programm, bekommst du ein T-Shirt, ` +
      `ein Basecap und jeden Tag Mittagessen.<br><br>` +
      `Sollte es finanziell nicht möglich sein, das Camp zu besuchen, ` +
      `dann melde dich gerne bei uns. Wir möchten jedem die Teilnahme ermöglichen. ` +
      `Schreib uns einfach eine E-Mail an <a href="mailto:info@baseballcamp-magdeburg.de">info@baseballcamp-magdeburg.de</a>, und wir finden eine Lösung.`,
  },
  {
    question: "Sprechen die Coaches Deutsch?",
    answer:
      "Die Coaches kommen aus den USA und sprechen Englisch. " +
      "Aber keine Sorge: Jedes Team hat mindestens einen deutschen Übersetzer dabei. " +
      "So lernst du ganz nebenbei und spielerisch auch noch ein bisschen Englisch!",
  },
  {
    question: "Wo findet das Camp statt?",
    answer:
      "Das Camp findet statt an Sportanlage Tonschacht Holsteiner Str., 39122 Magdeburg. " +
      "Die nächste Straßenbahn-Haltestelle ist Sohlener Str. (Linie 2). Wir warten dort morgens auf euch/eure Kinder, damit jeder sicher zum Camp kommt. " +
      "Falls du nicht weißt, wie du hinkommen kannst, melde dich einfach bei uns.",
  },
  {
    question: "Gibt es Mitfahrgelegenheiten?",
    answer:
      "Wer möchte kann während der Woche zum täglichen Treffpunkt am Alten Markt kommen. " +
      "Von dort aus steigen wir gemeinsam in die Bahn zum Camp. " +
      "Falls Interesse besteht, gib es einfach in der Anmeldung bei Anmerkung mit an! " +
      "(Wichtig: Das Bahnticket ist nicht im Camp-Preis inbegriffen und muss selbst besorgt werden.)",
  },
];
---

<section id="faq-section" class="section fade-in">
  <div class="max-w-4xl mx-auto">
    <h2 class="text-4xl md:text-5xl font-black text-outline uppercase mb-8 text-center">
      Häufige Fragen
    </h2>
    <div class="card">
      {faqs.map((faq, index) => (
        <div class="faq-item" style={`transition-delay: ${index * 0.1}s`}>
          <button class="faq-question text-xl md:text-2xl w-full text-left flex items-center justify-between">
            <span>{faq.question}</span>
            <span class="faq-icon">+</span>
          </button>
          <div class="faq-answer text-lg" set:html={faq.answer}></div>
        </div>
      ))}
    </div>
  </div>
</section>

<script>
  document.addEventListener("DOMContentLoaded", () => {
    const faqItems = document.querySelectorAll(".faq-item");
    faqItems.forEach((item) => {
      const button = item.querySelector("button");
      const answer = item.querySelector(".faq-answer") as HTMLElement;
      const icon = item.querySelector(".faq-icon") as HTMLElement;

      if (!button || !answer || !icon) return;

      button.addEventListener("click", () => {
        const isOpen = item.hasAttribute("data-open");

        faqItems.forEach((otherItem) => {
          if (otherItem !== item) {
            const otherAnswer = otherItem.querySelector(".faq-answer") as HTMLElement;
            const otherIcon = otherItem.querySelector(".faq-icon") as HTMLElement;
            if (otherAnswer && otherIcon) {
              otherAnswer.style.maxHeight = "0";
              otherAnswer.style.opacity = "0";
              otherAnswer.style.paddingTop = "0";
              otherAnswer.style.paddingBottom = "0";
              otherIcon.textContent = "+";
              otherIcon.style.transform = "rotate(0deg)";
              otherItem.removeAttribute("data-open");
            }
          }
        });

        if (isOpen) {
          answer.style.maxHeight = "0";
          answer.style.opacity = "0";
          answer.style.paddingTop = "0";
          answer.style.paddingBottom = "0";
          icon.textContent = "+";
          icon.style.transform = "rotate(0deg)";
          item.removeAttribute("data-open");
        } else {
          answer.style.paddingTop = "1rem";
          answer.style.paddingBottom = "0.5rem";
          answer.style.opacity = "1";
          // expand to full content height, then remove max-height so cut-off cannot happen on font-load
          const fullHeight = answer.scrollHeight + 40;
          answer.style.maxHeight = fullHeight + "px";
          icon.textContent = "−";
          icon.style.transform = "rotate(180deg)";
          item.setAttribute("data-open", "true");
        }
      });
    });
  });
</script>

<style>
  .faq-item:not(:last-child) {
    border-bottom: 3px solid rgba(255, 255, 255, 0.3);
    transition: opacity 0.4s ease-out;
    transition-delay: inherit;
  }

  .fade-in.animate-in .faq-item {
    opacity: 1;
  }

  .faq-question {
    font-weight: 900;
    text-transform: uppercase;
    margin-bottom: 0.5rem;
  }

  .faq-item button {
    background: none;
    border: none;
    color: inherit;
    cursor: pointer;
    padding: 0;
    transition: opacity 0.2s ease;
  }

  .faq-item button:hover {
    opacity: 0.8;
  }

  .faq-icon {
    font-size: 1.5em;
    font-weight: 900;
    transition: transform 0.2s ease;
    flex-shrink: 0;
    margin-left: 1rem;
    display: inline-block;
  }

  .faq-answer {
    margin-top: 0.5rem;
    padding-top: 0;
    padding-bottom: 0;
    overflow: hidden;
    transition: max-height 0.3s ease,
      opacity 0.3s ease,
      padding-top 0.3s ease,
      padding-bottom 0.3s ease;
    max-height: 0;
    opacity: 0;
    line-height: 1.6;
  }

  .faq-item[data-open="true"] .faq-answer {
    padding-top: 1rem;
    padding-bottom: 0.5rem;
  }

  @media (max-width: 640px) {
    .faq-item {
      padding: 0.75rem 0;
    }

    .faq-question {
      font-size: 1.1rem;
      line-height: 1.5;
    }

    .faq-icon {
      font-size: 1.25em;
      margin-left: 0.75rem;
    }

    .faq-answer {
      font-size: 1rem;
      line-height: 1.5;
    }
  }
</style>
